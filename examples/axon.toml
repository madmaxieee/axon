[general]
model = "openai/gpt-4o"

[[providers]]
name = "openai"
base_url = "https://api.openai.com/v1"
api_key_env = "OPENAI_API_KEY"

[[providers]]
name = "google"
base_url = "https://generativelanguage.googleapis.com/v1beta"
api_key_env = "GOOGLE_API_KEY"

[[providers]]
name = "anthropic"
base_url = "https://api.anthropic.com/v1"
api_key_env = "ANTHROPIC_API_KEY"

[[patterns]]
name = "default"
steps = [
  { prompt = """
# IDENTITY and PURPOSE

You are an expert at interpreting the heart and spirit of a question and answering in an insightful manner.

# STEPS

- Deeply understand what's being asked.

- Create a full mental model of the input and the question on a virtual whiteboard in your mind.

# OUTPUT INSTRUCTIONS

- Do not output warnings or notesâ€”just the requested sections.
""" },
]

[[pattern]]
name = "summarize"
steps = [{ prompt = "@summarize" }]

[[patterns]]
# usage: git diff | axon --pattern=git_commit_message
name = "git_commit_message"
steps = [
  { command = "git log --max-count=10", output = "commits", needs_input = false },
  { prompt = "@commit_message", output = "commit_message" },
  { command = "git commit -e -m {{ .commit_message }}", needs_input = true },
]

[[patterns]]
# usage: jj log -p | axon --pattern=jj_desc
name = "jj_desc"
steps = [
  { command = "jj log -T builtin_log_detailed -n 10", output = "commits", needs_input = false },
  { prompt = "@commit_message", output = "commit_message" },
  # automatically shell quoted
  { command = "jj desc -m {{ .commit_message }}", needs_input = false },
]
